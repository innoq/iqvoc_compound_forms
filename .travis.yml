language: ruby
cache: bundler
bundler_args: "--without production --retry 3"
bundler_args:
rvm:
# - 1.9.3
- 2.0
- 2.2
- ruby-head
# - jruby-19mode
# - jruby-head
env:
- DB=sqlite
- DB=mysql
before_install:
- cp config/database.$DB.yml config/database.yml
- gem update bundler
before_script:
- bundle exec rake db:drop RAILS_ENV=test
- bundle exec rake db:create RAILS_ENV=test
- bundle exec rake db:migrate RAILS_ENV=test
branches:
  only:
  - master
notifications:
  email: true
  slack:
    secure: gj0DGf9tUSBfLmjpjvwRuKiUojmWCtP4gfve3vEL1uZ0uzfjNAlibj4jxHO8w2/SNS4PcZ930batya4XoC5/rS19524pZ5brt++p4Xu295spoEqMVoeK+unl1L6ZrazvO5gJkraAqftxiJ2njwJ8OwJS33psXRLb/bZWcLAMb3A=
deploy:
  provider: rubygems
  api_key:
    secure: maEhwWkTskmPRX1BdqJXrpnKrtTKrBGoho33oFn70OD+Z51vHYuZxz5SYUyzEG/uL2R5QFlIReUFtibpnSZx1xvTnqZyxMWY8gvRaOhrgmGoKmGvtbqF9zABTv7K/ivY5Kkt6jo3jahvf4/eQ+bWKCnA0Ak1JpuWhbgxZY8hUGY=
  gem: iqvoc_compound_forms
  on:
    tags: true
    repo: innoq/iqvoc_compound_forms
matrix:
  allow_failures:
    - rvm: ruby-head
